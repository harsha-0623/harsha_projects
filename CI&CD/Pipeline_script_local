node {
  stage('Git Checkout') {
    try {
      git branch: 'main', credentialsId: 'github-token', url: 'https://github.com/rhvreddy/project.git'
    } catch (Exception e) {
      error "Git checkout failed: ${e.message}"
    }
  }

  stage('Deploy') {
    try {
      // List the contents of the workspace for debugging
      sh 'ls -la'

      // Ensure the script is executable
      sh 'chmod +x assignment.sh'
      
      // Run the script
      def cmd = './assignment.sh' // Use ./ to run the script from the current directory
      sh "${cmd}"
    } catch (Exception e) {
      error "Deployment failed: ${e.message}"
    }
  }
}
